"use strict";function _defineProperty(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}window.onload=function(){function a(t){var n=t.parent().parent().prev().find(".view-ItemEntryPrice").text(),e=(n=$.trim(n))*t.parent().find("input").val();t.parent().parent().next().html(e.toFixed(2));t.parent().parent().parent().next().find(".jiage1").html(e.toFixed(2))}function e(){0==$(".jia").size()&&$(".queren").remove()}$(".shangjia").mousemove(function(){$(".top-r1").css(_defineProperty({display:"block",transition:"1s",background:"#ffffff",border:"1px solid #ccc","border-top":"none"},"transition","2s")),$(".shangjia").css("background","#ffffff").css("border","1px solid #ccc").css("border-top","none")}),$(".shangjia").mouseout(function(){$(".top-r1").css("display","none"),$(".shangjia").css("background","#f4f4f4").css("border","none")}),$(".bangzhu").mousemove(function(){$(".bangzhu2").css({display:"block",background:"#ffffff","z-index":"1000"}),$(".bangzhu").css({background:"#ffffff",border:"1px solid #ccc"})}),$(".bangzhu").mouseout(function(){$(".bangzhu2").css("display","none"),$(".bangzhu").css({background:"#f4f4f4",border:"none"})}),$(".guanzhu").mousemove(function(){$(".guanzhu1").css({display:"block",background:"white"}),$(".guanzhu").css({background:"#ffffff",border:"1px solid #ccc","border-bottom":"1px solid white","z-index":"100"})}),$(".guanzhu").mouseout(function(){$(".guanzhu1").css({display:"none"}),$(".guanzhu").css({border:"none",background:"#f4f4f4"})}),$(".beibei-r1").mousemove(function(){$(".gouwuche").css({display:"block"}),$(".beibei-r1").css({"border-bottom-right-radius":"0"})}),$(".beibei-r1").mouseout(function(){$(".gouwuche").css({display:"none"}),$(".beibei-r1").css({"border-bottom-right-radius":"10px"})}),$(".view-CartList").on("click",".jia",function(){var t=$(this).prev().val();10<=++t&&(t=10);var n=$(this).parent().parent().prev().find(".view-ItemEntryPrice").text();ajax("GET","../api/carsupdate.php","valss="+t+"&jiage="+n,function(t){}),$(this).prev().val(t),a($(this));var e=r();i(e),c(e)}),$(".view-CartList").on("click",".jian",function(){var t=$(this).next().val();--t<=1&&(t=1);var n=$(this).parent().parent().prev().find(".view-ItemEntryPrice").text();ajax("GET","../api/carsupdate.php","valss="+t+"&jiage="+n,function(t){}),$(this).next().val(t),a($(this));var e=r();i(e),c(e)}),$(".view-CartList").on("click",".del",function(){if(confirm("您确定要删除该商品吗？")){$(this).parent().parent().prev().prev().remove(),$(this).parent().parent().prev().remove(),$(this).parent().parent().next().remove(),$(this).parent().parent().remove();var t=$(this).parent().prev().prev().prev().find(".view-ItemEntryPrice").text();console.log(t);ajax("GET","../api/carsdelete.php","jiage="+t,function(t){})}e();var n=r();i(n),c(n)});var n=!0;function r(){for(var t=[],n=$(".cart-td-check input").size(),e=0;e<n;e++)$(".cart-td-check input").eq(e).prop("checked")&&t.push(e);return t}function i(t){for(var n=0,e=0;e<t.length;e++)n+=parseInt($(".shuliang").eq(t[e]).val());$(".allnum").html(n)}function c(t){for(var n=0,e=0;e<t.length;e++){var a=$(".cart-td-subtotal").eq(t[e]).text();n+=1*(a=$.trim(a))}$(".allprice").html("￥"+n.toFixed(2))}$(".quanxuan").on("click",function(){n?($(".cart-td-check input").prop("checked","checked"),$(".quanxuan input").prop("checked","checked")):($(".cart-td-check input").removeAttr("checked"),$(".quanxuan input").removeAttr("checked")),n=!n;var t=r();i(t),c(t)}),$(".deleteall").on("click",function(){var t=r();if(confirm("您确定要删除多行吗？"))for(var n=t.length-1;0<=n;n--)$(".cart-td-check").eq(t[n]).parent().parent().remove();e()}),$(".view-CartList").on("click",".gouxuan",function(){var t=r();n=t.length==$(".gouxuan").size()?($(".quanxuan").prop("checked","checked"),!1):($(".quanxuan").removeAttr("checked"),!0),i(t=r()),c(t)}),$(".view-CartList").on("blur",".shuliang",function(){a($(this));var t=r();i(t),c(t)});var s=document.querySelector(".view-CartList");document.querySelector(".pure-form");ajax("GET","../api/cars.php","",function(t){var n=JSON.parse(t).map(function(t){return'<thead>\n\t\t\t<tr class="seg-entry"></tr>\n\t\t\t\t\t\t\t<tr class="dianming">\n\t\t\t\t\t\t\t\t<td colspan="7">\n\t\t\t\t\t\t\t\t\t<input type="checkbox" class="J_eventCheck" checked="checked">\n\t\t\t\t\t\t\t\t\t<span class="event-title">\n\t\t\t\t\t\t\t\t\t\t'+t.dianming+'\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr class="xuanlan">\n\t\t\t\t\t\t\t\t<td class="cart-td-check">\n\t\t\t\t\t\t\t\t\t<input type="checkbox" name="" class="gouxuan" />\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="cart-td-item-info">\n\t\t\t\t\t\t\t\t\t<a class="image"><img src="'+t.urlimg1+'"/></a>\n\t\t\t\t\t\t\t\t\t<a class="biaoti">'+t.title+'</a>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="cart-td-item-sku">\n\t\t\t\t\t\t\t\t\t<p>'+t.yangshi+'</p>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="cart-td-item-price">\n\t\t\t\t\t\t\t\t\t<p class="view-ItemEntryPrice">'+t.danjia+'</p>\n\t\t\t\t\t\t\t\t\t<p class="strike">'+t.danjia+'</p>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="cart-td-number">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class="jian">-</span>\n\t\t\t\t\t\t\t\t\t<input type="text"  value="'+t.shuliang+'" class="shuliang" />\n\t\t\t\t\t\t\t\t\t<span class="jia">+</span>\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="cart-td-subtotal">\n\t\t\t\t\t\t\t\t\t<span class="price">'+t.danjia+'</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class="del1">\n\t\t\t\t\t\t\t\t\t<span class="del">删除</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr class="xiaoji1">\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t<td class="xiaoji2">\n\t\t\t\t\t\t\t\t\t<div class="subtotal-row">\n\t\t\t\t\t\t\t\t\t<span class="xiaoji">小计：</span>\n\t\t\t\t\t\t\t\t\t<span class="jiage1">'+t.danjia+"</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t</tr></thead>\n\t\t\t\t\t\t\t\t"}).join("");s.innerHTML=n})};